image: openjdk:8

before_script:
  - pwd
  - ls -l

stages:
  - quality
  - build
  - deploy

build:
  stage: build
  script: ./gradlew build

lint:
  stage: quality
  script: ./gradlew check

unit_test:
  stage: quality
  script: ./gradlew clean test

coverage_test:
  stage: quality
  script: ./gradlew clean coverage_test

load_test:
  stage: quality
  script: echo "Enable load test as a separate suite. Ex.: ./gradlew clean load_test"

deploy_to_production:
  stage: deploy
  script:
    - echo "There is no deploy yet"
    - exit 1
  when: manual
